# 07. План Внедрения В Код

## 1. Принцип

Внедрение по фазам с измеримым критерием готовности.  
Каждая фаза должна улучшать конкретные метрики, а не только визуальное впечатление.

## 2. Фаза A: Геометрия плит 2.0

1. Перевести генерацию плит с «чистого Voronoi» на эволюционирующие полигоны.
2. Добавить неоднородные масштабы плит и микроплиты.
3. Добавить диффузные границы как отдельный тип.

Критерий готовности:

1. Снижение метрики «polygonality».
2. Уменьшение длин идеально прямых сегментов.

## 3. Фаза B: Кинематика на Эйлеровых полюсах

1. Ввести `Ω` на плиту.
2. Считать `v_rel`, `v_n`, `v_t` на каждом сегменте.
3. Перевести типизацию границ на кинематику.

Критерий готовности:

1. Границы классифицируются стабильно и физически читаемо.
2. Нет «случайной» смены типа границы от шума.

## 4. Фаза C: Деформация и орогенез

1. Ввести поля деформации `strain_*`.
2. Сделать variable-width орогенические пояса.
3. Убрать fixed-thickness uplift вдоль линии границы.

Критерий готовности:

1. Хребты не выглядят как равномерные полосы.
2. Появляются пояса и ветвления, похожие на реальные системы.

## 5. Фаза D: Океаническая кора и батиметрия

1. Ввести `ocean_age` и его адвекцию.
2. Реализовать возраст-глубина (Parsons & Sclater).
3. Добавить траншеи/хребты/трансформы/континентальные окраины.

Критерий готовности:

1. Исчезают одинаковые прибрежные каймы.
2. Глубины океана перестают быть «однотонными».

## 6. Фаза E: Осадки и релаксация

1. Ввести `sediment_thickness`.
2. Реализовать сглаживание и заполнение бассейнов осадками.
3. Добавить изостатическую релаксацию.

Критерий готовности:

1. Снижение искусственной резкости переходов.
2. Более естественные шельфы, склоны и равнины.

## 7. Фаза F: Калибровка и ранжирование

1. Встроить метрики из `06_DATASETS_AND_CALIBRATION.md`.
2. Автоматизировать массовые прогоны и score.
3. Фиксировать «golden seeds» для регрессий.

Критерий готовности:

1. Стабильный рост итогового score.
2. Снижение визуальных регрессий между коммитами.

